containers:

  node:
    setup:
    #- !Alpine v3.3
    - !Ubuntu trusty
    - !UbuntuUniverse
    - !Install [npm]
    - !NpmDependencies
    environ:
      NODE_PATH: /usr/local/lib/node_modules
      HOME: /tmp

  doc:
    setup:
    - !Container node
    - !Install [make, py-sphinx, py-sphinx_rtd_theme]


commands:

  npm: !Command
    description: Npm command
    container: node
    run: [npm]

  test: !Command
    description: Npm command
    container: node
    run: [npm, test]

  doc: !Command
    description: Build documentation
    container: doc
    run: [make, html]
    work-dir: doc
    epilog: |
      --------------------------------------------------------
      Documentation is built under doc/_build/html/index.html
